[![Python 3.8](https://img.shields.io/badge/python-3.8-blue.svg)](https://www.python.org/downloads/release/python-360/)
[![Homebrewery v3](https://img.shields.io/badge/homebrewery-v3-blue.svg)](https://homebrewery.naturalcrit.com/)

# donjon_to_homebrewery
Converts [donjon](https://donjon.bin.sh) random dungeons into nice homebrewery v3 formatted text to copy and paste.  It will add page markers to break up room locations, but some minor edits may still be required to the final document.

This tool has been tested with:
1. AD&D
1. D&D 4e
1. D&D 5e

NOTE: don't forget to grab both maps (gm and player) from donjon as well as the json! :)

## Using GitHub Actions

NOTE: filename, gm map and player map are all required fields when using the github action.

1. Via the Actions tab click on `Build Your Own`
1. Click `Run Workflow`
1. Enter google drive download link for donjon json file (required)*
1. Provide GM and Player map hosted URLs (required)**
1. When the job has finished click on Summary
1. Scroll to the bottom to find the Hombrewery.txt file under `Aftifacts`

**e.g. imgur.com - when copying link you will need to put `.png` on the end of the url!

*IMPORTANT: Creating download link for google drive

1. Make the json shareable with anyone with the link with viewer rights (make sure viewers can download files via settings)
1. Copy link which will look like: https://drive.google.com/file/d/111111AAAAAAAABBBBBBBBBBB/view?usp=sharing
1. 111111AAAAAAAABBBBBBBBBBB is the file ID (your file ID will be different)
1. Create this link: https://docs.google.com/uc?export=download&id=111111AAAAAAAABBBBBBBBBBB
1. Enter this URL in the github action workflow filename field

## Using locally

To install:
1. Clone repo
1. cd into repo
1. `pip install pipenv`
1. `pipenv shell` (NOTE: you may need to install pyenv to install python 3.8)

To run:
1. Copy json from donjon into repo folder
1. Supplied help text explains arguments needed to run the command
```
positional arguments:
  filename

optional arguments:
  -h, --help            show this help message and exit
  -gm GM_MAP, --gm_map GM_MAP
                        URL for the GM map image
  -p PLAYER_MAP, --player_map PLAYER_MAP
                        URL for the Player map image
```
1. If you have the GM and Player maps, host them on an image hosting site and add the urls as arguments
1. `python convert_donjon_to_homebrewery.py your_filename.json -gm https://imgur.something.png -p https://imgur.something.png`

You can now copy and paste the contents of homebrewery.txt into your [homebrewery](https://homebrewery.naturalcrit.com/) document.

You can see an example based on the included example.json [here](https://homebrewery.naturalcrit.com/share/PHjB9LurqAWm), this document hasn't been changed in any way since being generated by `DtH` to give you an idea of edits you will need to make.

Troubleshooting:
1. Raise an issue via Issues tab with as much detail as possible, also please provide the json / json file that is causing problems.
